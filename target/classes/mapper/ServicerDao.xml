<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--类名-->
<mapper namespace="com.house.dao.ServicerDao">
<<<<<<< HEAD

    <resultMap type="com.house.entity.Servicer" id="servicermap">
        <id column="servicer_id" property="servicerid"/>
        <result column="servicer_name" property="servicername"/>
        <result column="servicer_age" property="servicerage"/>
        <result column="servicer_sex" property="servicersex"/>
        <result column="servicer_phone" property="servicerphone"/>
        <result column="servicer_img" property="servicerimg"/>
        <result column="servicer_experience" property="servicerexperience"/>
        <result column="servicer_score" property="servicerscore"/>
        <result column="servicer_price" property="servicerprice"/>
        <result column="servicer_des" property="servicerdes"/>
        <result column="servicer_file" property="servicerfile"/>
        <result column="create_time" property="createtime"/>
        <result column="lastedit_time" property="lastedittime"/>
        <result column="enable_status" property="enablestatus"/>
        <result column="check_status" property="checkstatus"/>
        <association property="degree" column="degree_id" javaType="com.house.entity.Degree">
            <id column="degree_id" property="degreeid"/>
            <result column="degree_name" property="degreename"/>
            <result column="priority" property="priority"/>
        </association>
        <association property="servicetype" column="servicetype_id" javaType="com.house.entity.ServiceType">
            <id column="servicetype_id" property="servicetypeid"/>
            <result column="servicetype_name" property="servicetypename"/>
            <result column="priority" property="priority"/>
        </association>
        <association property="city" column="city_id" javaType="com.house.entity.WorkArea" select="queryAreaById">
            <id column="workarea_id" property="workareaid"/>
            <result column="worearea_name" property="workareaname"/>
            <result column="priority" property="priority"/>
        </association>
        <association property="lcoal" column="lcoal_id" javaType="com.house.entity.WorkArea" select="queryAreaById">
            <id column="workarea_id" property="workareaid"/>
            <result column="worearea_name" property="workareaname"/>
            <result column="priority" property="priority"/>
        </association>
    </resultMap>

    <resultMap id="areamapper" type="com.house.entity.WorkArea">
        <id column="workarea_id" property="workareaid"/>
        <result column="worearea_name" property="workareaname"/>
        <result column="priority" property="priority"/>
    </resultMap>

=======
>>>>>>> parent of 49a0d14... admin-qualify
    <update id="updateServicer" parameterType="com.house.entity.Servicer">
        update tb_servicer
        <set>
            <if test="enablestatus != null">enable_status=#{enablestatus},</if>
        </set>
        where servicer_id=#{servicerid}
    </update>
<<<<<<< HEAD

    <select id="queryAreaById" parameterType="int" resultMap="areamapper">
        select
        workarea_id,
        workarea_name,
        priority
        from tb_workarea
        where workarea_id=#{_parameter}
    </select>

    <select id="queryServicer" resultMap="servicermap">
        select
        s.servicer_id,
        s.servicer_name,
        s.servicer_age,
        s.servicer_sex,
        s.servicer_phone,
        s.servicer_img,
        s.servicer_experience,
        s.servicer_score,
        s.servicer_price,
        s.servicer_des,
        s.servicer_file,
        s.create_time,
        s.lastedit_time,
        s.enable_status,
        s.check_status,
        d.degree_id,
        d.degree_name,
        d.priority as dpriority,
        st.servicetype_id,
        st.servicetype_name,
        st.priority as stpriority
        from tb_servicer s,tb_degree d,tb_servicetype st
        <where>
            and s.degree_id=d.degree_id
            and s.servicetype_id=st.servicetype_id
        </where>
    </select>

    <select id="queryQualify" resultMap="servicermap">
        select
        s.servicer_id,
        s.servicer_name,
        s.servicer_age,
        s.servicer_sex,
        s.servicer_phone,
        s.servicer_img,
        s.servicer_experience,
        s.servicer_score,
        s.servicer_price,
        s.servicer_des,
        s.servicer_file,
        s.create_time,
        s.lastedit_time,
        s.enable_status,
        s.check_status,
        d.degree_id,
        d.degree_name,
        d.priority as dpriority,
        st.servicetype_id,
        st.servicetype_name,
        st.priority as stpriority
        from tb_servicer s,tb_degree d,tb_servicetype st
        where check_status=0
              and s.degree_id=d.degree_id
              and s.servicetype_id=st.servicetype_id
        order by lastedit_time desc
=======
    <!--id:方法名   result：返回值类型-->
    <select id="queryServicer" resultType="com.house.entity.Servicer">
--         select servicer_id,servicer_name,servicer_age,servicer_sex,servicer_phone,servicer_img,servicer_experience,servicer_score,servicer_price,servicer_des,servicer_file,degree_id,create_time,lastedit_time,enable_status
        select servicer_id,servicer_name,servicer_age,servicer_sex,servicer_phone,enable_status
        from tb_servicer
>>>>>>> parent of 49a0d14... admin-qualify
    </select>

    <select id="queryServicerById" resultType="com.house.entity.Servicer">
--         select servicer_id,servicer_name,servicer_age,servicer_sex,servicer_phone,servicer_img,servicer_experience,servicer_score,servicer_price,servicer_des,servicer_file,degree_id,create_time,lastedit_time,enable_status
        select servicer_id,servicer_name,servicer_age,servicer_sex,servicer_phone,enable_status
        from tb_servicer
        where servicer_id=#{servicerid}
    </select>
</mapper>